(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{zRUs:function(t,e,i){"use strict";i.r(e),i.d(e,"WorldcityModule",(function(){return Lt}));var r=i("ofXK"),n=i("tyNb"),o=i("AytR"),c=i("tk/3"),a=i("+0xr"),s=i("M9IT"),l=i("Dh3D"),u=i("fXoL"),m=i("kmnG"),d=i("qFsG");function b(t,e){1&t&&(u.Ub(0,"p"),u.Ub(1,"em"),u.Ec(2,"Loading..."),u.Tb(),u.Tb())}const f=function(){return["../city"]};function h(t,e){1&t&&(u.Ub(0,"div",14),u.Ub(1,"button",15),u.Ec(2," Add a new City "),u.Tb(),u.Tb()),2&t&&(u.Cb(1),u.mc("routerLink",u.oc(1,f)))}function p(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"ID"),u.Tb())}function g(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.Fc(t.id)}}function C(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"Name"),u.Tb())}const y=function(t){return["../city",t]};function v(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ub(1,"a",17),u.Ec(2),u.Tb(),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.mc("routerLink",u.pc(2,y,t.id)),u.Cb(1),u.Fc(t.name)}}function U(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"Latitude"),u.Tb())}function T(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.Fc(t.lat)}}function I(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"Longitude"),u.Tb())}function S(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.Fc(t.lon)}}function E(t,e){1&t&&u.Pb(0,"mat-header-row")}function D(t,e){1&t&&u.Pb(0,"mat-row")}const w=function(){return[10,20,50]};let O=(()=>{class t{constructor(t){this.http=t,this.url=o.a.serverUrl+"/api/cities",this.defaultPageIndex=0,this.defaultPageSize=10,this.defaultSortColumn="name",this.defaultSortOrder="asc",this.defaultFilterColumn="name",this.filterQuery=null,this.cities=new a.o,this.displayedColumns=["id","name","lat","lon"]}ngOnInit(){this.loadData()}loadData(t=null){let e=new s.c;e.pageIndex=this.defaultPageIndex,e.pageSize=this.defaultPageSize,t&&(this.filterQuery=t),this.getData(e)}getData(t){let e=(new c.d).set("pageIndex",t.pageIndex.toString()).set("pageSize",t.pageSize.toString()).set("sortColumn",this.sort?this.sort.active:this.defaultSortColumn).set("sortOrder",this.sort?this.sort.direction:this.defaultSortOrder);this.filterQuery&&(e=e.set("filterColumn",this.defaultFilterColumn).set("filterQuery",this.filterQuery)),this.http.get(this.url,{params:e}).subscribe(t=>{this.paginator.length=t.totalCount,this.cities.data=t.data},t=>console.error(t))}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(c.b))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-cities"]],viewQuery:function(t,e){var i;1&t&&(u.yc(s.a,!0),u.Ic(l.a,!0)),2&t&&(u.rc(i=u.dc())&&(e.paginator=i.first),u.rc(i=u.dc())&&(e.sort=i.first))},decls:22,vars:12,consts:[[4,"ngIf"],["class","commands text-right",4,"ngIf"],[3,"hidden"],["matInput","","placeholder","Filter by name (or part of it)...",3,"keyup"],["matSort","",1,"mat-elevation-z8",3,"dataSource","hidden","matSortActive","matSortDirection","matSortChange"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","lat"],["matColumnDef","lon"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions","page"],[1,"commands","text-right"],["type","button",1,"btn","btn-success",3,"routerLink"],["mat-sort-header",""],[3,"routerLink"]],template:function(t,e){1&t&&(u.Ub(0,"p"),u.Ec(1,"Here's a list of cities: feel free to play with it."),u.Tb(),u.Cc(2,b,3,0,"p",0),u.Cc(3,h,3,2,"div",1),u.Ub(4,"mat-form-field",2),u.Ub(5,"input",3),u.cc("keyup",(function(t){return e.loadData(t.target.value)})),u.Tb(),u.Tb(),u.Ub(6,"mat-table",4),u.cc("matSortChange",(function(){return e.loadData()})),u.Sb(7,5),u.Cc(8,p,2,0,"mat-header-cell",6),u.Cc(9,g,2,1,"mat-cell",7),u.Rb(),u.Sb(10,8),u.Cc(11,C,2,0,"mat-header-cell",6),u.Cc(12,v,3,4,"mat-cell",7),u.Rb(),u.Sb(13,9),u.Cc(14,U,2,0,"mat-header-cell",6),u.Cc(15,T,2,1,"mat-cell",7),u.Rb(),u.Sb(16,10),u.Cc(17,I,2,0,"mat-header-cell",6),u.Cc(18,S,2,1,"mat-cell",7),u.Rb(),u.Cc(19,E,1,0,"mat-header-row",11),u.Cc(20,D,1,0,"mat-row",12),u.Tb(),u.Ub(21,"mat-paginator",13),u.cc("page",(function(t){return e.getData(t)})),u.Tb()),2&t&&(u.Cb(2),u.mc("ngIf",!e.cities),u.Cb(1),u.mc("ngIf",e.cities),u.Cb(1),u.mc("hidden",!e.cities),u.Cb(2),u.nc("matSortActive",e.defaultSortColumn),u.nc("matSortDirection",e.defaultSortOrder),u.mc("dataSource",e.cities)("hidden",!e.cities),u.Cb(13),u.mc("matHeaderRowDef",e.displayedColumns),u.Cb(1),u.mc("matRowDefColumns",e.displayedColumns),u.Cb(1),u.mc("pageSize",10)("pageSizeOptions",u.oc(11,w)))},directives:[r.n,m.c,d.b,a.n,l.a,a.c,a.i,a.b,a.k,a.m,s.a,n.g,a.h,l.b,a.a,n.i,a.j,a.l],styles:[""]}),t})();var P=i("bTqV");const k=function(){return["cities"]},L=function(){return["countries"]};let F=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Ib({type:t,selectors:[["app-worldhome"]],decls:8,vars:4,consts:[[1,"mb-3"],["mat-raised-button","","color","primary","routerLinkActive","router-link-active",1,"mx-2",3,"routerLink"]],template:function(t,e){1&t&&(u.Ub(0,"p"),u.Ec(1,"WorldCity Home"),u.Tb(),u.Ub(2,"nav",0),u.Ub(3,"a",1),u.Ec(4,"Cities"),u.Tb(),u.Ub(5,"a",1),u.Ec(6,"Countries"),u.Tb(),u.Tb(),u.Pb(7,"router-outlet")),2&t&&(u.Cb(3),u.mc("routerLink",u.oc(2,k)),u.Cb(2),u.mc("routerLink",u.oc(3,L)))},directives:[P.a,n.i,n.h,n.k],styles:[""]}),t})();function q(t,e){1&t&&(u.Ub(0,"p"),u.Ub(1,"em"),u.Ec(2,"Loading..."),u.Tb(),u.Tb())}const x=function(){return["../country"]};function A(t,e){1&t&&(u.Ub(0,"div",14),u.Ub(1,"button",15),u.Ec(2," Add a new Country "),u.Tb(),u.Tb()),2&t&&(u.Cb(1),u.mc("routerLink",u.oc(1,x)))}function R(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"ID"),u.Tb())}function z(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.Fc(t.id)}}function H(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"Name"),u.Tb())}const M=function(t){return["../country",t]};function N(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ub(1,"a",17),u.Ec(2),u.Tb(),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.mc("routerLink",u.pc(2,M,t.id)),u.Cb(1),u.Fc(t.name)}}function Q(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"ISO2"),u.Tb())}function $(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.Fc(t.iso2)}}function j(t,e){1&t&&(u.Ub(0,"mat-header-cell",16),u.Ec(1,"ISO3"),u.Tb())}function G(t,e){if(1&t&&(u.Ub(0,"mat-cell"),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.Cb(1),u.Fc(t.iso3)}}function _(t,e){1&t&&u.Pb(0,"mat-header-row")}function V(t,e){1&t&&u.Pb(0,"mat-row")}const J=function(){return[10,20,50]};let B=(()=>{class t{constructor(t){this.http=t,this.url=o.a.serverUrl+"/api/countries",this.defaultPageIndex=0,this.defaultPageSize=10,this.defaultSortColumn="name",this.defaultSortOrder="asc",this.defaultFilterColumn="name",this.filterQuery=null,this.countries=new a.o,this.displayedColumns=["id","name","iso2","iso3"]}ngOnInit(){this.loadData()}loadData(t=null){let e=new s.c;e.pageIndex=this.defaultPageIndex,e.pageSize=this.defaultPageSize,t&&(this.filterQuery=t),this.getData(e)}getData(t){let e=(new c.d).set("pageIndex",t.pageIndex.toString()).set("pageSize",t.pageSize.toString()).set("sortColumn",this.sort?this.sort.active:this.defaultSortColumn).set("sortOrder",this.sort?this.sort.direction:this.defaultSortOrder);this.filterQuery&&(e=e.set("filterColumn",this.defaultFilterColumn).set("filterQuery",this.filterQuery)),this.http.get(this.url,{params:e}).subscribe(t=>{this.paginator.length=t.totalCount,this.countries.data=t.data},t=>console.error(t))}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(c.b))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-countries"]],viewQuery:function(t,e){var i;1&t&&(u.yc(s.a,!0),u.Ic(l.a,!0)),2&t&&(u.rc(i=u.dc())&&(e.paginator=i.first),u.rc(i=u.dc())&&(e.sort=i.first))},decls:22,vars:12,consts:[[4,"ngIf"],["class","commands text-right",4,"ngIf"],[3,"hidden"],["matInput","","placeholder","Filter by name (or part of it)...",3,"keyup"],["matSort","",1,"mat-elevation-z8",3,"dataSource","hidden","matSortActive","matSortDirection","matSortChange"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","iso2"],["matColumnDef","iso3"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions","page"],[1,"commands","text-right"],["type","button",1,"btn","btn-success",3,"routerLink"],["mat-sort-header",""],[3,"routerLink"]],template:function(t,e){1&t&&(u.Ub(0,"p"),u.Ec(1,"Here's a list of countries: feel free to play with it."),u.Tb(),u.Cc(2,q,3,0,"p",0),u.Cc(3,A,3,2,"div",1),u.Ub(4,"mat-form-field",2),u.Ub(5,"input",3),u.cc("keyup",(function(t){return e.loadData(t.target.value)})),u.Tb(),u.Tb(),u.Ub(6,"mat-table",4),u.cc("matSortChange",(function(){return e.loadData()})),u.Sb(7,5),u.Cc(8,R,2,0,"mat-header-cell",6),u.Cc(9,z,2,1,"mat-cell",7),u.Rb(),u.Sb(10,8),u.Cc(11,H,2,0,"mat-header-cell",6),u.Cc(12,N,3,4,"mat-cell",7),u.Rb(),u.Sb(13,9),u.Cc(14,Q,2,0,"mat-header-cell",6),u.Cc(15,$,2,1,"mat-cell",7),u.Rb(),u.Sb(16,10),u.Cc(17,j,2,0,"mat-header-cell",6),u.Cc(18,G,2,1,"mat-cell",7),u.Rb(),u.Cc(19,_,1,0,"mat-header-row",11),u.Cc(20,V,1,0,"mat-row",12),u.Tb(),u.Ub(21,"mat-paginator",13),u.cc("page",(function(t){return e.getData(t)})),u.Tb()),2&t&&(u.Cb(2),u.mc("ngIf",!e.countries),u.Cb(1),u.mc("ngIf",e.countries),u.Cb(1),u.mc("hidden",!e.countries),u.Cb(2),u.nc("matSortActive",e.defaultSortColumn),u.nc("matSortDirection",e.defaultSortOrder),u.mc("dataSource",e.countries)("hidden",!e.countries),u.Cb(13),u.mc("matHeaderRowDef",e.displayedColumns),u.Cb(1),u.mc("matRowDefColumns",e.displayedColumns),u.Cb(1),u.mc("pageSize",10)("pageSizeOptions",u.oc(11,J)))},directives:[r.n,m.c,d.b,a.n,l.a,a.c,a.i,a.b,a.k,a.m,s.a,n.g,a.h,l.b,a.a,n.i,a.j,a.l],styles:[""]}),t})();var K=i("3Pt+"),W=i("lJxs"),X=i("d3UM"),Z=i("FKr1");function Y(t,e){1&t&&(u.Ub(0,"p"),u.Ub(1,"em"),u.Ec(2,"loading ..."),u.Tb(),u.Tb())}function tt(t,e){1&t&&(u.Ub(0,"div",14),u.Ub(1,"strong"),u.Ec(2,"ERROR"),u.Tb(),u.Ec(3,": A city with the same "),u.Ub(4,"i"),u.Ec(5,"name"),u.Tb(),u.Ec(6,", "),u.Ub(7,"i"),u.Ec(8,"lat"),u.Tb(),u.Ec(9,", "),u.Ub(10,"i"),u.Ec(11,"lon"),u.Tb(),u.Ec(12," and "),u.Ub(13,"i"),u.Ec(14,"country"),u.Tb(),u.Ec(15," already exists. "),u.Tb())}function et(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," Name is required. "),u.Tb())}function it(t,e){if(1&t&&(u.Ub(0,"mat-error"),u.Cc(1,et,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("name").errors?null:t.form.get("name").errors.required)}}function rt(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," Latitude is required. "),u.Tb())}function nt(t,e){if(1&t&&(u.Ub(0,"mat-error"),u.Cc(1,rt,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("lat").errors?null:t.form.get("lat").errors.required)}}function ot(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," Longitude is required. "),u.Tb())}function ct(t,e){if(1&t&&(u.Ub(0,"mat-error"),u.Cc(1,ot,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("lon").errors?null:t.form.get("lon").errors.required)}}function at(t,e){if(1&t&&(u.Ub(0,"mat-option",15),u.Ec(1),u.Tb()),2&t){const t=e.$implicit;u.mc("value",t.id),u.Cb(1),u.Gc(" ",t.name," ")}}function st(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," Country is required. "),u.Tb())}function lt(t,e){if(1&t&&(u.Ub(0,"mat-error"),u.Cc(1,st,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("countryId").errors?null:t.form.get("countryId").errors.required)}}const ut=function(){return["../cities"]};let mt=(()=>{class t{constructor(t,e,i){this.activatedRoute=t,this.router=e,this.http=i}ngOnInit(){this.form=new K.g({name:new K.e("",[K.s.required]),lat:new K.e("",[K.s.required]),lon:new K.e("",[K.s.required]),countryId:new K.e("",[K.s.required])},null,this.isDupeCity()),this.loadData()}loadData(){this.loadCountries(),this.id=+this.activatedRoute.snapshot.paramMap.get("id"),this.id?this.http.get(`${o.a.serverUrl}/api/cities/${this.id}`).subscribe(t=>{this.city=t,this.title="Edit - "+this.city.name,this.form.patchValue(this.city)},console.error):this.title="Create a new City"}loadCountries(){var t=o.a.serverUrl+"/api/countries",e=(new c.d).set("pageSize","9999").set("sortColumn","name").set("sortOrder","asc");this.http.get(t,{params:e}).subscribe(t=>{this.countries=t.data},t=>console.error(t))}onSubmit2(){let t=this.form.value;console.info("c: ",t);let e=Object.assign(Object.assign({},this.city),t);console.log("model: ",e),console.info("this.city",this.city)}onSubmit(){var t=this.id?this.city:{};t.name=this.form.get("name").value,t.lat=this.form.get("lat").value,t.lon=this.form.get("lon").value,t.countryId=+this.form.get("countryId").value,this.id?this.http.put(o.a.serverUrl+"/api/cities/"+this.city.id,t).subscribe(e=>{console.log("City "+t.id+" has been updated."),this.router.navigate(["../cities"])},t=>console.log(t)):this.http.post(o.a.serverUrl+"/api/cities",t).subscribe(t=>{console.log("City "+t.id+" has been created."),this.router.navigate(["../cities"])},t=>console.log(t))}isDupeCity(){return t=>{var e={};return e.id=this.id?this.id:0,e.name=this.form.get("name").value,e.lat=this.form.get("lat").value,e.lon=this.form.get("lon").value,e.countryId=+this.form.get("countryId").value,this.http.post(o.a.serverUrl+"/api/cities/IsDupeCity",e).pipe(Object(W.a)(t=>t?{isDupeCity:!0}:null))}}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(n.a),u.Ob(n.f),u.Ob(c.b))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-cityedit"]],decls:28,vars:12,consts:[[1,"col-6"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"col-12"],["matInput","","formControlName","name","placeholder","name"],["matInput","","formControlName","lat","placeholder","city latitude"],["matInput","","formControlName","lon","placeholder","city longitude"],["formControlName","countryId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"my-2"],["type","submit","mat-raised-button","",1,"mx-1","btn","btn-success",3,"disabled"],["type","button","mat-raised-button","",1,"mx-1",3,"routerLink"],[1,"alert","alert-danger"],[3,"value"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"h1"),u.Ec(2),u.Tb(),u.Cc(3,Y,3,0,"p",1),u.Ub(4,"form",2),u.cc("ngSubmit",(function(){return e.onSubmit()})),u.Cc(5,tt,16,0,"div",3),u.Ub(6,"mat-form-field",4),u.Pb(7,"input",5),u.Cc(8,it,2,1,"mat-error",1),u.Tb(),u.Ub(9,"mat-form-field",4),u.Pb(10,"input",6),u.Cc(11,nt,2,1,"mat-error",1),u.Tb(),u.Ub(12,"mat-form-field",4),u.Pb(13,"input",7),u.Cc(14,ct,2,1,"mat-error",1),u.Tb(),u.Ub(15,"mat-form-field",4),u.Ub(16,"mat-label"),u.Ec(17,"Country:"),u.Tb(),u.Ub(18,"mat-select",8),u.Ub(19,"mat-option",9),u.Ec(20,"--- Select a country ---"),u.Tb(),u.Cc(21,at,2,2,"mat-option",10),u.Tb(),u.Cc(22,lt,2,1,"mat-error",1),u.Tb(),u.Ub(23,"div",11),u.Ub(24,"button",12),u.Ec(25,"Save"),u.Tb(),u.Ub(26,"button",13),u.Ec(27,"Cancel"),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(2),u.Fc(e.title),u.Cb(1),u.mc("ngIf",e.id&&!e.city),u.Cb(1),u.mc("formGroup",e.form),u.Cb(1),u.mc("ngIf",e.form.invalid&&(null==e.form.errors?null:e.form.errors.isDupeCity)),u.Cb(3),u.mc("ngIf",e.form.get("name").invalid&&(e.form.get("name").dirty||e.form.get("name").touched)),u.Cb(3),u.mc("ngIf",e.form.get("lat").invalid&&(e.form.get("lat").dirty||e.form.get("lat").touched)),u.Cb(3),u.mc("ngIf",e.form.get("lon").invalid&&(e.form.get("lon").dirty||e.form.get("lon").touched)),u.Cb(7),u.mc("ngForOf",e.countries),u.Cb(1),u.mc("ngIf",e.form.get("countryId").invalid&&(e.form.get("countryId").dirty||e.form.get("countryId").touched)),u.Cb(2),u.mc("disabled",e.form.invalid),u.Cb(2),u.mc("routerLink",u.oc(11,ut)))},directives:[r.n,K.t,K.n,K.h,m.c,d.b,K.c,K.m,K.f,m.f,X.a,Z.n,r.m,P.b,n.g,m.b],styles:[""]}),t})();function dt(t,e){1&t&&(u.Ub(0,"p"),u.Ub(1,"em"),u.Ec(2,"Loading..."),u.Tb(),u.Tb())}function bt(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," Name is required. "),u.Tb())}function ft(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," Name already exists: please choose another. "),u.Tb())}function ht(t,e){if(1&t&&(u.Ub(0,"div",14),u.Cc(1,bt,2,0,"div",1),u.Cc(2,ft,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("name").errors?null:t.form.get("name").errors.required),u.Cb(1),u.mc("ngIf",null==t.form.get("name").errors?null:t.form.get("name").errors.isDupeField)}}function pt(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," ISO 3166-1 ALPHA-2 country code is required. "),u.Tb())}function gt(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," ISO 3166-1 ALPHA-2 country code requires 2 letters. "),u.Tb())}function Ct(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," This ISO 3166-1 ALPHA-2 country code already exist: please choose another. "),u.Tb())}function yt(t,e){if(1&t&&(u.Ub(0,"div",14),u.Cc(1,pt,2,0,"div",1),u.Cc(2,gt,2,0,"div",1),u.Cc(3,Ct,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("iso2").errors?null:t.form.get("iso2").errors.required),u.Cb(1),u.mc("ngIf",null==t.form.get("iso2").errors?null:t.form.get("iso2").errors.pattern),u.Cb(1),u.mc("ngIf",null==t.form.get("iso2").errors?null:t.form.get("iso2").errors.isDupeField)}}function vt(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," ISO 3166-1 ALPHA-3 country code is required. "),u.Tb())}function Ut(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," ISO 3166-1 ALPHA-3 country code requires 3 letters. "),u.Tb())}function Tt(t,e){1&t&&(u.Ub(0,"div"),u.Ec(1," This ISO 3166-1 ALPHA-3 country code already exist: please choose another. "),u.Tb())}function It(t,e){if(1&t&&(u.Ub(0,"div",14),u.Cc(1,vt,2,0,"div",1),u.Cc(2,Ut,2,0,"div",1),u.Cc(3,Tt,2,0,"div",1),u.Tb()),2&t){const t=u.gc();u.Cb(1),u.mc("ngIf",null==t.form.get("iso3").errors?null:t.form.get("iso3").errors.required),u.Cb(1),u.mc("ngIf",null==t.form.get("iso3").errors?null:t.form.get("iso3").errors.pattern),u.Cb(1),u.mc("ngIf",null==t.form.get("iso3").errors?null:t.form.get("iso3").errors.isDupeField)}}function St(t,e){if(1&t){const t=u.Vb();u.Ub(0,"button",15),u.cc("click",(function(){return u.uc(t),u.gc().onSubmit()})),u.Ec(1," Save "),u.Tb()}if(2&t){const t=u.gc();u.mc("disabled",t.form.invalid)}}function Et(t,e){if(1&t){const t=u.Vb();u.Ub(0,"button",15),u.cc("click",(function(){return u.uc(t),u.gc().onSubmit()})),u.Ec(1," Create "),u.Tb()}if(2&t){const t=u.gc();u.mc("disabled",t.form.invalid)}}const Dt=function(){return["/countries"]};let wt=(()=>{class t{constructor(t,e,i,r){this.fb=t,this.activatedRoute=e,this.router=i,this.http=r}ngOnInit(){this.form=this.fb.group({name:["",K.s.required,this.isDupeField("name")],iso2:["",[K.s.required,K.s.pattern("[a-zA-Z]{2}")],this.isDupeField("iso2")],iso3:["",[K.s.required,K.s.pattern("[a-zA-Z]{3}")],this.isDupeField("iso3")]}),this.loadData()}loadData(){this.id=+this.activatedRoute.snapshot.paramMap.get("id"),this.id?this.http.get(o.a.serverUrl+"/api/countries/"+this.id).subscribe(t=>{this.country=t,this.title="Edit - "+this.country.name,this.form.patchValue(this.country)},t=>console.error(t)):this.title="Create a new Country"}onSubmit(){var t=this.id?this.country:{};t.name=this.form.get("name").value,t.iso2=this.form.get("iso2").value,t.iso3=this.form.get("iso3").value,this.id?this.http.put(o.a.serverUrl+"/api/countries/"+this.country.id,t).subscribe(e=>{console.log("Country "+t.id+" has been updated."),this.router.navigate(["/countries"])},t=>console.log(t)):this.http.post(o.a.serverUrl+"/api/countries",t).subscribe(t=>{console.log("Country "+t.id+" has been created."),this.router.navigate(["/countries"])},t=>console.log(t))}isDupeField(t){return e=>{var i=(new c.d).set("countryId",this.id?this.id.toString():"0").set("fieldName",t).set("fieldValue",e.value);return this.http.post(o.a.serverUrl+"/api/countries/IsDupeField",null,{params:i}).pipe(Object(W.a)(t=>t?{isDupeField:!0}:null))}}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(K.d),u.Ob(n.a),u.Ob(n.f),u.Ob(c.b))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-countryedit"]],decls:28,vars:10,consts:[[1,"country-edit"],[4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","required","","placeholder","Country name...",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","iso2"],["type","text","id","iso2","formControlName","iso2","required","","placeholder","2 letters country code...",1,"form-control"],["for","iso3"],["type","text","id","iso3","formControlName","iso3","required","","placeholder","3 letters country code...",1,"form-control"],[1,"form-group","commands"],["type","submit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-default",3,"routerLink"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-success",3,"disabled","click"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"h1"),u.Ec(2),u.Tb(),u.Cc(3,dt,3,0,"p",1),u.Ub(4,"div",2),u.cc("ngSubmit",(function(){return e.onSubmit()})),u.Ub(5,"div",3),u.Ub(6,"label",4),u.Ec(7,"Country name:"),u.Tb(),u.Pb(8,"br"),u.Pb(9,"input",5),u.Cc(10,ht,3,2,"div",6),u.Tb(),u.Ub(11,"div",3),u.Ub(12,"label",7),u.Ec(13,"ISO 3166-1 ALPHA-2 Country Code (2 letters)"),u.Tb(),u.Pb(14,"br"),u.Pb(15,"input",8),u.Cc(16,yt,4,3,"div",6),u.Tb(),u.Ub(17,"div",3),u.Ub(18,"label",9),u.Ec(19,"ISO 3166-1 ALPHA-3 Country Code (3 letters)"),u.Tb(),u.Pb(20,"br"),u.Pb(21,"input",10),u.Cc(22,It,4,3,"div",6),u.Tb(),u.Ub(23,"div",11),u.Cc(24,St,2,1,"button",12),u.Cc(25,Et,2,1,"button",12),u.Ub(26,"button",13),u.Ec(27," Cancel "),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(2),u.Fc(e.title),u.Cb(1),u.mc("ngIf",e.id&&!e.country),u.Cb(1),u.mc("formGroup",e.form),u.Cb(6),u.mc("ngIf",e.form.get("name").invalid&&(e.form.get("name").dirty||e.form.get("name").touched)),u.Cb(6),u.mc("ngIf",e.form.get("iso2").invalid&&(e.form.get("iso2").dirty||e.form.get("iso2").touched)),u.Cb(6),u.mc("ngIf",e.form.get("iso3").invalid&&(e.form.get("iso3").dirty||e.form.get("iso3").touched)),u.Cb(2),u.mc("ngIf",e.id),u.Cb(1),u.mc("ngIf",!e.id),u.Cb(1),u.mc("routerLink",u.oc(9,Dt)))},directives:[r.n,K.n,K.h,K.c,K.m,K.f,K.r,n.g],styles:["input.ng-valid[_ngcontent-%COMP%]{border-left:5px solid green}input.ng-invalid.ng-dirty[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid red}input.ng-invalid[_ngcontent-%COMP%] ~ .invalid-feedback[_ngcontent-%COMP%], input.ng-valid[_ngcontent-%COMP%] ~ .valid-feedback[_ngcontent-%COMP%]{display:block}"]}),t})();const Ot=[{path:"",component:F,children:[{path:"cities",component:O},{path:"city/:id",component:mt},{path:"city",component:mt},{path:"countries",component:B},{path:"country/:id",component:wt},{path:"country",component:wt}]}];let Pt=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(Ot)],n.j]}),t})();var kt=i("hctd");let Lt=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},imports:[[r.c,kt.a,K.q,Pt]]}),t})()}}]);